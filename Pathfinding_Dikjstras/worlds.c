//
//  worlds.c
//  Dijkstra
//
//  Created by Jim Smith on 06/11/2014.
//  Copyright (c) 2014 James Smith. All rights reserved.
//

#include <stdio.h>
#include <stdlib.h>
#include "worlds.h"
#include "SolutionListOperations.h"

//part from the ones defined below, these are the only maps I am going to allow these functions to try and access
extern char currentMap[MAXX][MAXY],  temporaryMap[MAXX][MAXY];

// map definitions
//i've used  X  rather than OBSTACLE below just to make them easier to visualise
#define X OBSTACLE
const char map1[MAXX][MAXY] = {
    ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    
};

const char map2[MAXX][MAXY] = {
    ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
};

const char map3[MAXX][MAXY] = {
    ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ', X , X ,' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ', X , X ,' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ', X , X , X ,' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ', X , X , X ,' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ', X , X , X ,' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',

    
};

const char map4[MAXX][MAXY] = {
    ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ', X , X , X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X , X , X ,' ', X ,' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X , X , X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ', X , X ,' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',' ', X ,' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',' ', X ,' ',' ', X ,' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',' ', X ,' ',' ', X ,' ',' ',
     X , X , X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ', X , X , X , X ,' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',

    
};

const char map5[MAXX][MAXY] = {
    ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',
    ' ',' ', X ,' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ', X ,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',
    
};






/* void CopyMap( char from[MAXX][MAXY, char to[MAXX][MAXY]);
* function to make a temporary copy of a map so it can be written to
 *  params are 2d character arrays
 */
void CopyMap( const char from[MAXX][MAXY], char to[MAXX][MAXY])
{
    int x,y;

    // do a little safety checking
    if ( from != currentMap && from != map1 && from != map2 && from != map3 && from !=map4 && from !=temporaryMap)
        PrintThisMessageAndExit("invalid \"from\" value passed to CopyMap()");
    if ( to != currentMap && to!=temporaryMap)
        PrintThisMessageAndExit("invalid \"to\" value passed to CopyMap()");

    // ok, this is a simple copy
    for(x=MINX; x<MAXX; x++)
        for(y=MINY;y<MAXY; y++)
            to[x][y]  = from[x][y];
}



/* void PrintMap (char **map)
* simple function ot print a map
 * parameter is array of chars
 * checks that it is one of the valid maps
*/
 void PrintMap (char map[MAXX][MAXY])
{
    int x,y;
    if ( map != currentMap && map != map1 && map != map2 && map != map3 && map !=map4 && map != temporaryMap)
           PrintThisMessageAndExit("invalid map passed to PrintMap()");
    
    //top line
    for(x=MINX;x<MAXX;x++)
        printf("___");
    printf("\n");
    //remember that we need to print the high valuers of y first so they are at the top of the screen
    for( y = MAXY-1; y >= MINY; y--)
      {
        printf("|");
        for(x=MINX; x<MAXX;x++)
            printf(" %c ",map[x][y]);
        printf("|\n");
        //for(x=MINX;x<MAXX;x++)
        //  printf("____");
        //printf("\n");
      }
    //bottom line
    for(x=MINX;x<MAXX;x++)
        printf("___");
    printf("\n");
    
    
}

/* void   ReadComandLineAndSetMap(int argc, char **argv)
 * function that interpets the command line used to call the programme
 *  and set the values in the array cureentMap accordingly
 *  gets passed argc and argv from main()
 * does its own error checking so no returns
 */

void   ReadComandLineAndSetMap(int argc, const char * argv[])
{
    extern char currentMap[MAXX][MAXY];
    int idOfMap;
    // So now let's start by deciding what map we are using and making a working copy
    //use map1 as default
    if(argc==1)
        CopyMap(map4, currentMap);
    //or read it from the command lien if one argument is given
    else if(argc==2)
      {
        idOfMap = (int) atoi(argv[1]);
        switch (idOfMap)
        {
            case 1:
              CopyMap(map1, currentMap);
              break;
            case 2:
              CopyMap(map2, currentMap);
              break;
            case 3:
              CopyMap(map3, currentMap);
              break;
            case 4:
              CopyMap(map4, currentMap);
              break;
            default:
              PrintThisMessageAndExit("Invalid Input");
        }//end of switch
      }
    else //programme called incorrectly
        PrintThisMessageAndExit("Invalid Input");
}

